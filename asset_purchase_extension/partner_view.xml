<openerp>
	<data>

        <record id="view_partner_products_supplied_hcv_form" model="ir.ui.view">
            <field name="name">res.partner.products.supplied.hcv</field>
            <field name="model">res.partner</field>
			<field name="inherit_id" ref="base.view_partner_form"/>
			<field name="arch" type="xml">
				<notebook position="inside">
					<page string="Products Supplied" name="products_purchase" attrs="{'invisible':[('supplier','=',False)]}">
						<group>
							<field name="purchase_line_ids" widget="one2many_list" colspan="4" nolabel="1" readonly="1">
								<tree string="Products Supplied" editable="top">
									<field name="product_id" invisible="1"/>
									<field name="name"/>
									<field name="price"/>
									<field name="delivery_date"/>
									<field name="delivery_time"/>
								</tree>
							</field>
						</group>
					</page>
				</notebook>
			</field>
		</record>

        <record id="purchase.res_partner_view_purchase_buttons" model="ir.ui.view">
            <field name="name">res.partner.view.purchase.buttons</field>
            <field name="model">res.partner</field>
            <field name="inherit_id" ref="base.view_partner_form" />
            <field name="priority" eval="20"/>
            <field name="groups_id" eval="[(4, ref('purchase.group_purchase_user'))]"/>
            <field name="arch" type="xml">
                <xpath expr="//div[@name='buttons']" position="inside">
                    <button class="oe_inline oe_stat_button" name="%(purchase.act_res_partner_2_purchase_order)d" type="action"
                        attrs="{'invisible': [('supplier', '=', False)]}" icon="fa-shopping-cart">
                        <field string="Purchases" name="rfq_order_count" widget="statinfo"/>
                    </button>
                </xpath>
            </field>
        </record>

        <record model="ir.ui.view" id="purchase.purchase_partner_kanban_view">
            <field name="name">res.partner.kanban.purchaseorder.inherit</field>
            <field name="model">res.partner</field>
            <field name="inherit_id" ref="base.res_partner_kanban_view"/>
            <field name="groups_id" eval="[(4, ref('purchase.group_purchase_user'))]"/>
            <field name="arch" type="xml">
                <field name="mobile" position="after">
                    <field name="rfq_order_count"/>
                </field>
                
                <xpath expr="//div[@class='oe_kanban_partner_links']" position="inside">
                    <a name="%(purchase.act_res_partner_2_purchase_order)d" type="action" t-if="record.rfq_order_count.value>0">
                        <t t-esc="record.rfq_order_count.value"/> Purchases
                    </a>
                </xpath>
            </field>
        </record>

	</data>
</openerp>
